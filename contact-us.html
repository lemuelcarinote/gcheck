<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Connect with GCheck</title>
<link rel="icon" href="https://gcheck.com/wp-content/uploads/2023/12/logo-symbol.svg" type="image/svg+xml">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
<style>
    body {
        margin: 15px;
    }

    
    * {
        font-family: 'Poppins', Arial, sans-serif !important;
    }

    .wrapper {
        display: block;
        margin: 0 auto;
        max-width: 480px;
    }

    .row {
        padding: 15px 0
    }

    @media only screen and (max-width: 460px) {
        .mob-no {
            display: none !important;
            overflow: hidden !important;
            width: 0 !important;
            height: 0 !important;
        }
    }
</style>
<meta name="robots" content="noindex, nofollow">
</head>
<body>

<div class="pipedriveWebForms" data-pd-webforms="https://webforms.pipedrive.com/f/6iLCWNNfhyJvYlr6NCZRtivXjv87G7BHpuiLwbM01q8fVqpsMil5QomqaYakvEYVbB">
    <script src="https://webforms.pipedrive.com/f/loader"></script>
</div>

<script>
    // Function to push to dataLayer
    function pushToDataLayer(eventName, additionalData = {}) {
        console.log(eventName);
        // window.dataLayer = window.dataLayer || [];
        // window.dataLayer.push({
        //     event: eventName,
        //     ...additionalData
        // });
    }

    // Intercept network requests
    const originalFetch = window.fetch;
    console.log(originalFetch);
    window.fetch = function(...args) {
        const url = args[0];

        // Call the original fetch function
        return originalFetch.apply(this, args).then(response => {
            console.log("Calling original fetch function");
            // Check if the request URL indicates a form viewed
            if (url.includes("/viewed")) {
                console.log("You are viewing a pipedrive webform");
                pushToDataLayer('contact_us_viewed', {
                   formUrl: url
                });
            }

            // Check if the request URL indicates a form interacted
            if (url.includes("/interacted")) {
                console.log("You interacted on a pipedrive webform");
                pushToDataLayer('contact_us_interacted', {
                    formUrl: url
                });
            }

            // Check if the request URL indicates form submission
            if (url.includes("/f/6iLCWNNfhyJvYlr6NCZRtivXjv87G7BHpuiLwbM01q8fVqpsMil5QomqaYakvEYVbB") && response.ok) {
                // Assuming the form submission data is in the request body
                response.clone().json().then(data => {
                    console.log("You submitted on a pipedrive webform");
                    pushToDataLayer('contact_us_formsubmitted', {
                        formData: data
                    });
                });
            }

            return response;
        });
    };
</script>
    
</body>
</html>
